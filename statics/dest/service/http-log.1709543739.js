!function(){"use strict";var e=angular.module("jt.service.httpLog",["LocalStorageModule"]),t=Date.now||function(){return(new Date).getTime()};e.factory("httpLog",["$q","$injector","localStorageService",function(e,r,n){function u(e){return e===h||-1!=e.indexOf("httplog=false")?!0:!1}function o(e){var t=e("JT-Deprecate");t&&"development"===CONFIG.env&&alert("url:"+url+"is deprecate, "+t)}function s(){n.set("httpLog",a)}function c(){var e=r.get("$http");(i.length||l.length)&&e.post(h,a).success(function(){i.length=0,l.length=0,s(),setTimeout(c,g)}).error(function(){setTimeout(c,g)})}var a=n.get("httpLog")||{success:[],error:[]},i=a.success,l=a.error,g=12e4,h="/httplog";i.length+l.length>10?setTimeout(c,1):setTimeout(c,g);var f={request:function(e){return e._createdAt=t(),e},response:function(e){var r=e.config,n=r.url;if(o(e.headers),u(n))return e;var c=t()-r._createdAt;return i.push({url:n,method:r.method,use:c}),s(),e},requestError:function(t){return e.reject(t)},responseError:function(r){o(r.headers);var n=r.config,c=n.url;return u(c)?e.reject(r):(l.push({url:c,status:r.status,use:t()-n._createdAt}),s(),e.reject(r))}};return f}])}(this);